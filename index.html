<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Henriix Education Portal</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="dark">

<header>
  <img src="https://img.icons8.com/color/96/000000/school-building.png" alt="Henriix Logo" class="logo">
</header>

<div class="theme-buttons">
  <button onclick="setTheme('dark')">Dark Theme</button>
  <button onclick="setTheme('light')">Light Theme</button>
</div>

<div class="container">

<div id="loginBox">
  <h2>Login</h2>
  <input type="text" id="username" placeholder="Username"><br>
  <input type="password" id="password" placeholder="Password"><br>
  <button onclick="login()">Login</button>
</div>

<div id="dashboard" class="hidden">
  <h2>Subjects</h2>
  <div class="subjects" id="subjectCards"></div>

  <div style="text-align:center; margin-top:30px;">
    <button onclick="showAssignments()">View Assignments</button>
  </div>

  <div class="pdf-list hidden" id="pdfList"></div>

  <button onclick="logout()">Logout</button>
</div>

<div class="admin-contact">
  <a href="https://wa.me/923166606488" target="_blank">
    <img src="https://img.icons8.com/color/48/000000/whatsapp--v1.png" class="whatsapp-icon">
    Contact Admin
  </a>
</div>

</div>

<script>
const validUsers = [
  {username:"MET-1", password:"NSU123"},
  {username:"MET-2", password:"NSU456"}
];

const subjects = [
  {name:"Industrial-Management", icon:"https://img.icons8.com/color/96/000000/factory.png"},
  {name:"Applied-Mechanics", icon:"https://img.icons8.com/color/96/000000/gears.png"},
  {name:"Technical-Drawing", icon:"https://img.icons8.com/color/96/000000/blueprint.png"},
  {name:"Electric-Electronics", icon:"https://img.icons8.com/color/96/000000/electronics.png"},
  {name:"Information-Communication", icon:"https://img.icons8.com/color/96/000000/internet.png"},
  {name:"Pakistan-Studies", icon:"https://img.icons8.com/color/96/000000/pakistan.png"},
  {name:"Chinese-TANG", icon:"https://img.icons8.com/color/96/000000/china.png"}
];

function setTheme(mode){
  if(mode==='dark'){
    document.body.classList.add('dark');
    document.body.classList.remove('light');
  } else {
    document.body.classList.add('light');
    document.body.classList.remove('dark');
  }
}

function login(){
  const u = username.value;
  const p = password.value;
  const valid = validUsers.some(user=>user.username===u && user.password===p);
  if(valid){
    loginBox.classList.add("hidden");
    dashboard.classList.remove("hidden");
    showSubjects();
  } else {
    alert("Invalid username or password!");
  }
}

function logout(){ location.reload(); }

function showSubjects(){
  const container = document.getElementById("subjectCards");
  container.innerHTML="";
  subjects.forEach(subj=>{
    const div = document.createElement("div");
    div.className="card";
    div.innerHTML = `<img src="${subj.icon}"><span>${subj.name.replace(/-/g,' ')}</span>`;
    div.onclick = ()=> showPDFs(subj.name);
    container.appendChild(div);
  });
}

async function showPDFs(subj){
  const pdfList = document.getElementById("pdfList");
  pdfList.classList.remove("hidden");
  pdfList.innerHTML=`<h3>${subj.replace(/-/g,' ')} PDFs</h3>`;

  try{
    const res = await fetch(`subjects/${subj}.json`);
    const data = await res.json();

    if(data.length===0){
      pdfList.innerHTML+="<p>No PDFs available.</p>";
      return;
    }

    data.forEach(pdf=>{
      const div = document.createElement("div");
      div.className="pdf-item";
      div.innerHTML=`<a href="${pdf.url}" target="_blank">
      <img src="https://img.icons8.com/color/24/000000/pdf.png">
      ${pdf.title}</a>`;
      pdfList.appendChild(div);
    });

  }catch{
    pdfList.innerHTML+="<p>Error loading PDFs.</p>";
  }
}

/* ASSIGNMENTS SYSTEM */

async function showAssignments(){
  const pdfList = document.getElementById("pdfList");
  pdfList.classList.remove("hidden");
  pdfList.innerHTML="<h3>Select Subject for Assignments</h3>";

  subjects.forEach(subj=>{
    const div=document.createElement("div");
    div.className="pdf-item";
    div.innerHTML=`<a href="#" onclick="loadAssignment('${subj.name}')">
    ðŸ“˜ ${subj.name.replace(/-/g,' ')}</a>`;
    pdfList.appendChild(div);
  });
}

async function loadAssignment(subject){
  const pdfList=document.getElementById("pdfList");
  pdfList.innerHTML=`<h3>${subject.replace(/-/g,' ')} Assignments</h3>`;

  try{
    const res=await fetch(`assignments/${subject}.json`);
    const data=await res.json();

    if(data.length===0){
      pdfList.innerHTML+="<p>No assignments available.</p>";
      return;
    }

    data.forEach(file=>{
      const div=document.createElement("div");
      div.className="pdf-item";
      div.innerHTML=`<a href="${file.url}" target="_blank">
      <img src="https://img.icons8.com/color/24/000000/pdf.png">
      ${file.title}</a>`;
      pdfList.appendChild(div);
    });

  }catch{
    pdfList.innerHTML+="<p>No assignments uploaded yet.</p>";
  }
}
</script>

</body>
</html>
